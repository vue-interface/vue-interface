@import "tailwindcss";

@import "./sizes.css";

@theme {
    /* Base form control styles */
    --form-control-display: flex;
    --form-control-width: 100%;
    --form-control-font-family: inherit;
    --form-control-font-weight: 400;
    --form-control-line-height: 1.5;
    --form-control-background-color: inherit;
    --form-control-border-width: 1px;
    --form-control-border-style: solid;
    --form-control-border-color: var(--color-gray-300, oklch(87.2% 0.01 258.338));
    --form-control-border-radius: 0.375rem;
    --form-control-transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;
    --form-control-appearance: none;
    --form-control-padding-x: 0.75rem;
    --form-control-padding-y: 0.375rem;

    /* Dark mode */
    --form-control-dark-color: var(--color-gray-50, oklch(98.5% 0.002 247.839));
    --form-control-dark-background-color: var(--color-neutral-700, oklch(37.1% 0 0));
    --form-control-dark-border-color: var(--color-neutral-500, oklch(55.6% 0 0));

    /* Focus state */
    --form-control-focus-color: inherit;
    --form-control-focus-background-color: inherit;
    --form-control-focus-border-color: var(--color-blue-500, oklch(62.3% 0.214 259.815));
    --form-control-focus-outline: 0;
    --form-control-focus-box-shadow: 0 0 0 .2rem color-mix(in oklch, var(--color-blue-400, oklch(70.7% 0.165 254.624)) 50%, transparent);
    --form-control-focus-dark-border-color: var(--color-blue-400, oklch(70.7% 0.165 254.624));

    /* Placeholder */
    --form-control-placeholder-color: var(--color-neutral-400, oklch(70.8% 0 0));
    --form-control-placeholder-opacity: 1;
    --form-control-placeholder-dark-color: var(--color-neutral-400, oklch(70.8% 0 0));

    /* Disabled state */
    --form-control-disabled-color: var(--color-neutral-400, oklch(70.8% 0 0));
    --form-control-disabled-background-color: var(--color-neutral-200, oklch(92.2% 0 0));
    --form-control-disabled-border-color: var(--color-neutral-400, oklch(70.8% 0 0));
    --form-control-disabled-opacity: 1;
    --form-control-disabled-dark-color: var(--color-neutral-600, oklch(43.9% 0 0));
    --form-control-disabled-dark-background-color: var(--color-neutral-900, oklch(20.5% 0 0));
    --form-control-disabled-dark-border-color: var(--color-neutral-700, oklch(20.5% 0 0));

    /* Invalid state */
    --form-control-invalid-color: var(--color-red-600, oklch(57.7% 0.245 27.325));
    --form-control-invalid-background-color: color-mix(in oklch, var(--color-red-600, oklch(57.7% 0.245 27.325)) 10%, transparent);
    --form-control-invalid-border-color: var(--color-red-600, oklch(57.7% 0.245 27.325));
    --form-control-invalid-focus-box-shadow: 0 0 0 .2rem color-mix(in oklch, var(--color-red-600, oklch(57.7% 0.245 27.325)) 50%, transparent);
    --form-control-invalid-background-repeat: no-repeat;
    --form-control-invalid-background-size: 1.25em;
    --form-control-invalid-background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc2626'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath d='m5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc2626' stroke='none'/%3e%3c/svg%3e");
    --form-control-invalid-background-position: right calc((var(--form-control-line-height) * 1em + var(--form-control-padding-y) + var(--form-control-padding-y)) / 4) center;

    /* Valid state */
    --form-control-valid-color: var(--color-green-600, oklch(62.7% 0.194 149.214));
    --form-control-valid-background-color: color-mix(in oklch, var(--color-green-600, oklch(62.7% 0.194 149.214)) 10%, transparent);
    --form-control-valid-border-color: var(--color-green-600, oklch(62.7% 0.194 149.214));
    --form-control-valid-focus-box-shadow: 0 0 0 .2rem color-mix(in oklch, var(--color-green-600, oklch(62.7% 0.194 149.214)) 50%, transparent);
    --form-control-valid-background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%2316a34a' d='m6.564.75-3.59 3.612-1.538-1.55L0 4.26l2.974 2.99L8 2.193z'/%3e%3c/svg%3e");
    --form-control-valid-background-repeat: no-repeat;
    --form-control-valid-background-position: right calc((var(--form-control-line-height) * 1em + var(--form-control-padding-y) + var(--form-control-padding-y)) / 4) center;
    --form-control-valid-background-size: 1.25em;

    /* Form control color specific */
    --form-control-color-width: 3rem;
    --form-control-color-height: calc(1.5em + var(--form-control-padding-y) + var(--form-control-padding-y) + var(--form-control-border-width) + var(--form-control-border-width));
    --form-control-color-padding: 0.375rem;

    /* Form group positioning */
    --form-group-inner-icon-size: 1.25em;
    --form-group-inner-icon-left: 0.5em;
    --form-group-inner-control-padding-left: 2em;

    /* Input field font size */
    --input-field-font-size: inherit;

    /* Textarea specific positioning */
    --textarea-icon-top-position: var(--form-group-inner-icon-left);
    --textarea-icon-transform: none;

    /* Generic positioning values */
    --position-relative: relative;
    --position-absolute: absolute;
    --position-top-50: 50%;
    --position-right-0: 0;
    --transform-translate-y-50: translateY(-50%);
    --display-flex: flex;
    --align-items-center: center;
    --justify-content-center: center;
    --display-inline-block: inline-block;
    --display-block: block;
    --display-none: none;

    /*DarK-Light mode toggle*/
    --form-switch-padding-x: 0.75rem;
    --form-switch-padding-y: 0.375rem;
    --form-switch-font-size: 2rem;
    --form-switch-border-radius: 0.25rem;
    --form-switch-border-color: var(--color-gray-400, oklch(76.5% 0.01 258.33));
    --form-switch-border-width: 1px;
    --form-switch-border-style: solid;

    --form-switch-light-bg: transparent;
    --form-switch-dark-bg: transparent;

    --form-switch-before-size: 1.25em;
    --form-switch-appearance: none;
    --form-switch-cursor: pointer;
    --form-switch-line-height: 1;
    --form-switch-before-content: '';
    --form-switch-before-background-repeat: no-repeat;
    --form-switch-before-background-position: center;
    --form-switch-before-background-size: contain;
    --form-switch-sun-bg: url("data:image/svg+xml,%3csvg viewBox='-12 -12 24 24' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle r='9' fill='%23fde68a' /%3e%3cpath stroke-linecap='round' stroke-linejoin='round' d='M 0 -6 L 0 -4.5 M 4.243 -4.241 L 3.182 -3.182 M 6 0 L 4.5 0 M 4.243 4.243 L 3.182 3.182 M 0 4.5 L 0 6 M -3.182 3.182 L -4.241 4.243 M -4.5 0 L -6 0 M -3.182 -3.182 L -4.241 -4.241 M 2.498 0 C 2.498 1.927 0.418 3.127 -1.25 2.167 C -2.021 1.718 -2.498 0.895 -2.498 0 C -2.498 -1.925 -0.418 -3.13 1.25 -2.165 C 2.026 -1.718 2.498 -0.893 2.498 0 Z' style='fill:%23ea580c;stroke:%23ea580c' /%3e%3c/svg%3e");

    --form-switch-sun-bg-focus: url("data:image/svg+xml,%3csvg viewBox='-12 -12 24 24' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle r='9' fill='%23fde68a' /%3e%3cpath stroke-linecap='round' stroke-linejoin='round' d='M 0 -6 L 0 -4.5 M 4.243 -4.241 L 3.182 -3.182 M 6 0 L 4.5 0 M 4.243 4.243 L 3.182 3.182 M 0 4.5 L 0 6 M -3.182 3.182 L -4.241 4.243 M -4.5 0 L -6 0 M -3.182 -3.182 L -4.241 -4.241 M 2.498 0 C 2.498 1.927 0.418 3.127 -1.25 2.167 C -2.021 1.718 -2.498 0.895 -2.498 0 C -2.498 -1.925 -0.418 -3.13 1.25 -2.165 C 2.026 -1.718 2.498 -0.893 2.498 0 Z' style='fill:%23c2410c;stroke:%23c2410c' /%3e%3c/svg%3e");

    --form-switch-moon-bg: url("data:image/svg+xml,%3csvg viewBox='-12 -12 24 24' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle r='9' fill='%236b21a8' /%3e%3cpath stroke='white' fill='white' stroke-linecap='round' stroke-linejoin='round' d='M 6 2.162 C 5.24 2.479 4.423 2.642 3.599 2.641 C 0.153 2.641 -2.641 -0.153 -2.641 -3.599 C -2.641 -4.45 -2.47 -5.261 -2.162 -6 C -4.486 -5.03 -6 -2.758 -6 -0.239 C -6 3.206 -3.206 6 0.239 6 C 2.758 6.001 5.03 4.487 6 2.162 Z' /%3e%3c/svg%3e");

    --form-switch-moon-bg-focus: url("data:image/svg+xml,%3csvg viewBox='-12 -12 24 24' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle r='9' fill='%235108a3' /%3e%3cpath stroke='white' fill='white' stroke-linecap='round' stroke-linejoin='round' d='M 6 2.162 C 5.24 2.479 4.423 2.642 3.599 2.641 C 0.153 2.641 -2.641 -0.153 -2.641 -3.599 C -2.641 -4.45 -2.47 -5.261 -2.162 -6 C -4.486 -5.03 -6 -2.758 -6 -0.239 C -6 3.206 -3.206 6 0.239 6 C 2.758 6.001 5.03 4.487 6 2.162 Z' /%3e%3c/svg%3e");
    
    /* Plaintext */
    --form-control-plaintext-display: block;
    --form-control-plaintext-color: inherit;
    --form-control-plaintext-line-height: 1.5;
    --form-control-plaintext-background: transparent;
    --form-control-plaintext-cursor: default;
    --form-control-plaintext-border: none;
    --form-control-plaintext-padding-left: 0em !important;
    --form-control-plaintext-padding-right: 0em !important;
    --form-control-plaintext-outline: none;
    --form-control-plaintext-font-size: 1rem;
    --form-control-plaintext-border-radius: 0.25rem;
}

@utility form-control {
    display: var(--form-control-display);
    width: var(--form-control-width);
    font-family: var(--form-control-font-family);
    font-weight: var(--form-control-font-weight);
    line-height: var(--form-control-line-height);
    background-color: var(--form-control-background-color);
    border-width: var(--form-control-border-width);
    border-style: var(--form-control-border-style);
    border-color: var(--form-control-border-color);
    border-radius: var(--form-control-border-radius);
    transition: var(--form-control-transition);
    appearance: var(--form-control-appearance);
    padding: var(--form-control-padding-y) var(--form-control-padding-x);

    @media (prefers-color-scheme: dark) {
        color: var(--form-control-dark-color);
        background-color: var(--form-control-dark-background-color);
        border-color: var(--form-control-dark-border-color);
    }

    &:focus {
        color: var(--form-control-focus-color);
        background-color: var(--form-control-focus-background-color);
        border-color: var(--form-control-focus-border-color);
        outline: var(--form-control-focus-outline);
        box-shadow: var(--form-control-focus-box-shadow);

        @media (prefers-color-scheme: dark) {
            border-color: var(--form-control-focus-dark-border-color);
        }
    }

    &::placeholder {
        color: var(--form-control-placeholder-color);
        opacity: var(--form-control-placeholder-opacity);

        @media (prefers-color-scheme: dark) {
            color: var(--form-control-placeholder-dark-color);
        }
    }

    &:disabled:not([readonly]) {
        color: var(--form-control-disabled-color);
        background-color: var(--form-control-disabled-background-color);
        border-color: var(--form-control-disabled-border-color);
        opacity: var(--form-control-disabled-opacity);

        @media (prefers-color-scheme: dark) {
            color: var(--form-control-disabled-dark-color);
            background-color: var(--form-control-disabled-dark-background-color);
            border-color: var(--form-control-disabled-dark-border-color);
        }
    }

    &.is-invalid,
    &[invalid] {
        border-color: var(--form-control-invalid-border-color);
        background-color: var(--form-control-invalid-background-color);
        color: var(--form-control-invalid-color);
        background-image: var(--form-control-invalid-background-image);
        background-repeat: var(--form-control-invalid-background-repeat);
        background-position: var(--form-control-invalid-background-position);
        background-size: var(--form-control-invalid-background-size);

        &:focus,
        &.focus {
            box-shadow: var(--form-control-invalid-focus-box-shadow);
        }
    }

    &.is-valid,
    &[valid] {
        border-color: var(--form-control-valid-border-color);
        background-color: var(--form-control-valid-background-color);
        color: var(--form-control-valid-color);
        background-image: var(--form-control-valid-background-image);
        background-repeat: var(--form-control-valid-background-repeat);
        background-position: var(--form-control-valid-background-position);
        background-size: var(--form-control-valid-background-size);

        &:focus,
        &.focus {
            box-shadow: var(--form-control-valid-focus-box-shadow);
        }
    }
}

@utility form-control-* {
    padding: --value(--form-padding-*);
    font-size: --value(--form-font-size-*);
    border-radius: --value(--form-border-radius-*);
}

@utility form-control-color {
    width: var(--form-control-color-width);
    height: var(--form-control-color-height);
    padding: var(--form-control-color-padding);
    border-radius: var(--form-control-border-radius);

    &::-moz-color-swatch {
        border-radius: var(--form-control-border-radius);
    }

    &::-webkit-color-swatch {
        border-radius: var(--form-control-border-radius);
    }
}

@utility input-field {
    @apply form-control;
    font-size: var(--input-field-font-size);

    &.is-invalid,
    &[invalid] {
        label,
        .invalid-feedback {
            color: var(--form-control-invalid-color);
        }
    }

    &.is-valid,
    &[valid] {
        label,
        .valid-feedback {
            color: var(--form-control-valid-color);
        }
    }
}

@utility textarea-field {
    @apply input-field;
}

@utility form-group-inner {
    position: var(--position-relative);

    &:has(> .form-group-inner-icon) .form-control {
        padding-left: var(--form-group-inner-control-padding-left);
    }
}

@utility form-group-inner-icon {
    position: var(--position-absolute);
    top: var(--position-top-50);
    left: var(--form-group-inner-icon-left);
    width: var(--form-group-inner-icon-size);
    font-size: var(--input-field-font-size);
    transform: var(--transform-translate-y-50);
    display: var(--display-flex);
    align-items: var(--align-items-center);
    justify-content: var(--justify-content-center);

    .textarea-field & {
        top: var(--textarea-icon-top-position);
        transform: var(--textarea-icon-transform);
    }
}

@utility invalid-feedback {
    color: var(--form-control-invalid-color);
    display: var(--display-none);

    .is-invalid ~ &,
    [invalid] ~ &,
    :has(.is-invalid) &,
    :has([invalid]) & {
        display: var(--display-block);
    }
}

@utility valid-feedback {
    color: var(--form-control-valid-color);
    display: var(--display-none);

    .is-valid ~ &,
    [valid] ~ &,
    :has(.is-valid) &,
    :has([valid]) & {
        display: var(--display-block);
    }
}

@utility form-switch-light-dark {
    padding: var(--form-switch-padding-y) var(--form-switch-padding-x);
    font-size: var(--form-switch-font-size);
    border-radius: var(--form-switch-border-radius);
    border: var(--form-switch-border-width) var(--form-switch-border-style) var(--form-switch-border-color);
    background-color: var(--form-switch-light-bg);
    appearance: var(--form-switch-appearance);
    cursor: var(--form-switch-cursor);
    position: var(--position-relative);
    line-height: var(--form-switch-line-height);
    
    &::before {
      content: var(--form-switch-before-content);
      display: var(--display-inline-block);
      width: var(--form-switch-before-size);
      height: var(--form-switch-before-size);
      background-repeat: var(--form-switch-before-background-repeat);
      background-position: var(--form-switch-before-background-position);
      background-size: var(--form-switch-before-background-size);
      background-image: var(--form-switch-sun-bg);
    }
  
    &:focus::before {
      background-image: var(--form-switch-sun-bg-focus);
    }
  
    &:checked {
      background-color: var(--form-switch-dark-bg);
      border-color: var(--form-switch-border-color);
    }
  
    &:checked::before {
      background-image: var(--form-switch-moon-bg);
    }
  
    &:checked:focus::before {
      background-image: var(--form-switch-moon-bg-focus);
    }
  
    @media (prefers-color-scheme: dark) {
      border-color: var(--form-control-dark-border-color);
    }
}

@utility form-control-plaintext {
    display: var(--form-control-plaintext-display);
    width: var(--form-control-width);
    color: var(--form-control-plaintext-color);
    border: var(--form-control-plaintext-border);
    outline: var(--form-control-plaintext-outline);
    background: var(--form-control-plaintext-background);
    cursor: var(--form-control-plaintext-cursor);
    padding: var(--form-control-padding-y) var(--form-control-padding-x);
    padding-left: var(--form-control-plaintext-padding-left);
    padding-right: var(--orm-control-plaintext-padding-right);
    font-size: var(--form-control-plaintext-font-size);
    border-radius: var(--form-control-plaintext-border-radius);
}