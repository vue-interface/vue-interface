@import "tailwindcss";

@import "./sizes.css";

@theme {
    /* Base form select styles */
    --form-select-display: flex;
    --form-select-width: 100%;
    --form-select-font-family: inherit;
    --form-select-font-weight: 400;
    --form-select-line-height: 1.5;
    --form-select-color: var(--color-gray-800, oklch(31.8% 0.014 256.848));
    --form-select-vertical-align: middle;
    --form-select-background-color: inherit;
    --form-select-background-image: url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIGZpbGw9J25vbmUnIHZpZXdCb3g9JzAgMCAyNCAyNCcgc3Ryb2tlLXdpZHRoPScxLjUnIHN0cm9rZT0nIzQwNDA0MCc+PHBhdGggc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBkPSdNMTkuNSA4LjI1bC03LjUgNy41LTcuNS03LjUnIC8+PC9zdmc+");
    --form-select-background-repeat: no-repeat;
    --form-select-background-position: right 0.375rem center;
    --form-select-background-size: 1rem;
    --form-select-border-width: 1px;
    --form-select-border-style: solid;
    --form-select-border-color: var(--color-gray-300, oklch(87.2% 0.01 258.338));
    --form-select-border-radius: 0.375rem;
    --form-select-transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
    --form-select-appearance: none;
    --form-select-padding-x: 0.75rem;
    --form-select-padding-y: 0.375rem;
    --form-select-padding-right: calc(var(--form-select-padding-x) * 2);
    --form-select-opacity: 1;

    /* Dark mode */
    --form-select-dark-color: var(--color-gray-50, oklch(98.5% 0.002 247.839));
    --form-select-dark-background-color: var(--color-neutral-700, oklch(37.1% 0 0));
    --form-select-dark-border-color: var(--color-neutral-500, oklch(55.6% 0 0));
    --form-select-dark-background-image: url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIGZpbGw9J25vbmUnIHZpZXdCb3g9JzAgMCAyNCAyNCcgc3Ryb2tlLXdpZHRoPScxLjUnIHN0cm9rZT0nI2Q0ZDRkNCc+PHBhdGggc3Ryb2tlLWxpbmVjYXA9J3JvdW5kJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBkPSdNMTkuNSA4LjI1bC03LjUgNy41LTcuNS03LjUnIC8+PC9zdmc+");

    /* Focus state */
    --form-select-focus-color: var(--color-gray-700, oklch(41.8% 0.01 256.848));
    --form-select-focus-background-color: inherit;
    --form-select-focus-border-color: var(--color-blue-400, oklch(70.7% 0.165 254.624));
    --form-select-focus-outline: 0;
    --form-select-focus-box-shadow: 0 0 0 .2rem color-mix(in oklch, var(--color-blue-400, oklch(70.7% 0.165 254.624)) 50%, transparent);
    --form-select-focus-dark-border-color: var(--color-blue-400, oklch(70.7% 0.165 254.624));
    --form-select-focus-dark-color: var(--color-white, oklch(100% 0.00011 271.152));
    --form-select-focus-dark-background-color: var(--color-neutral-700, oklch(37.1% 0 0));

    /* MS Value styles (Edge compatibility) */
    --form-select-ms-value-color: var(--color-gray-700, oklch(41.8% 0.01 256.848));
    --form-select-ms-value-background-color: var(--color-white, oklch(100% 0 0));
    --form-select-ms-value-dark-color: var(--color-gray-50, oklch(98.5% 0.002 247.839));
    --form-select-ms-value-dark-background-color: var(--color-neutral-700, oklch(37.1% 0 0));

    /* Multiple/size select styles */
    --form-select-multiple-height: auto;
    --form-select-multiple-padding-right: var(--form-select-padding-x);
    --form-select-multiple-background-image: none;

    /* Disabled state */
    --form-select-disabled-color: var(--color-neutral-400, oklch(70.8% 0 0));
    --form-select-disabled-background-color: var(--color-neutral-200, oklch(92.2% 0 0));
    --form-select-disabled-border-color: var(--color-neutral-400, oklch(70.8% 0 0));
    --form-select-disabled-dark-color: var(--color-neutral-600, oklch(43.9% 0 0));
    --form-select-disabled-dark-background-color: var(--color-neutral-900, oklch(20.5% 0 0));
    --form-select-disabled-dark-border-color: var(--color-neutral-700, oklch(20.5% 0 0));

    /* Firefox focus ring removal */
    --form-select-moz-focusring-color: transparent;
    --form-select-moz-focusring-text-shadow: 0 0 0 var(--color-gray-800, oklch(31.8% 0.014 256.848));

    /* Invalid state */
    --form-select-invalid-color: var(--color-red-600, oklch(57.7% 0.245 27.325));
    --form-select-invalid-background-color: color-mix(in oklch, var(--color-red-600, oklch(57.7% 0.245 27.325)) 10%, transparent);
    --form-select-invalid-border-color: var(--color-red-600, oklch(57.7% 0.245 27.325));
    --form-select-invalid-focus-box-shadow: 0 0 0 .2rem color-mix(in oklch, var(--color-red-600, oklch(57.7% 0.245 27.325)) 50%, transparent);
    --form-select-invalid-background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc2626'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath d='m5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc2626' stroke='none'/%3e%3c/svg%3e");
    --form-select-invalid-background-repeat: no-repeat;
    --form-select-invalid-background-position: right calc((var(--form-select-line-height) * 1em + var(--form-select-padding-x) * 2) / 4) center;
    --form-select-invalid-background-size: 1.25em;

    /* Valid state */
    --form-select-valid-color: var(--color-green-600, oklch(62.7% 0.194 149.214));
    --form-select-valid-background-color: color-mix(in oklch, var(--color-green-600, oklch(62.7% 0.194 149.214)) 10%, transparent);
    --form-select-valid-border-color: var(--color-green-600, oklch(63.199% 0.18596 147.388));
    --form-select-valid-focus-box-shadow: 0 0 0 .2rem color-mix(in oklch, var(--color-green-600, oklch(62.7% 0.194 149.214)) 50%, transparent);
    --form-select-valid-background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%2316a34a' d='m6.564.75-3.59 3.612-1.538-1.55L0 4.26l2.974 2.99L8 2.193z'/%3e%3c/svg%3e");
    --form-select-valid-background-repeat: no-repeat;
    --form-select-valid-background-position: right calc((var(--form-select-line-height) * 1em + var(--form-select-padding-x) * 2) / 4) center;
    --form-select-valid-background-size: 1.25em;

    /* Form group positioning for select */
    --form-select-group-inner-icon-padding-left: 2em;

    /* Select field font size */
    --select-field-font-size: inherit;

    /* Plaintext */
    --form-select-plaintext-display: block;
    --form-select-plaintext-color: inherit;
        /* --form-select-plaintext-line-height: 1.5; */
    --form-select-plaintext-background: transparent;
    --form-select-plaintext-cursor: default;
    --form-select-plaintext-border: none;
    --form-select-plaintext-padding-left: 0em !important;
    --form-select-plaintext-padding-right: 0em !important;
    --form-select-plaintext-outline: none;
    --form-select-plaintext-font-size: 1rem;
    --form-select-plaintext-border-radius: 0.25rem;
        /* --form-select-plaintext-background-image: none */
}

@utility form-select {
    display: var(--form-select-display);
    width: var(--form-select-width);
    padding: var(--form-select-padding-y) var(--form-select-padding-right) var(--form-select-padding-y) var(--form-select-padding-x);
    font-family: var(--form-select-font-family);
    font-weight: var(--form-select-font-weight);
    line-height: var(--form-select-line-height);
    color: var(--form-select-color);
    vertical-align: var(--form-select-vertical-align);
    background-color: var(--form-select-background-color);
    background-image: var(--form-select-background-image);
    background-repeat: var(--form-select-background-repeat);
    background-position: var(--form-select-background-position);
    background-size: var(--form-select-background-size);
    border-width: var(--form-select-border-width);
    border-style: var(--form-select-border-style);
    border-color: var(--form-select-border-color);
    border-radius: var(--form-select-border-radius);
    transition: var(--form-select-transition);
    appearance: var(--form-select-appearance);
    opacity: var(--form-select-opacity);

    @media (prefers-color-scheme: dark) {
        color: var(--form-select-dark-color);
        background-color: var(--form-select-dark-background-color);
        border-color: var(--form-select-dark-border-color);
        background-image: var(--form-select-dark-background-image);
    }

    &:focus {
        color: var(--form-select-focus-color);
        background-color: var(--form-select-focus-background-color);
        border-color: var(--form-select-focus-border-color);
        outline: var(--form-select-focus-outline);
        box-shadow: var(--form-select-focus-box-shadow);

        @media (prefers-color-scheme: dark) {
            color: var(--form-select-focus-dark-color);
            background-color: var(--form-select-focus-dark-background-color);            
            border-color: var(--form-select-focus-dark-border-color);
        }
    }

    &::-ms-value {
        color: var(--form-select-ms-value-color);
        background-color: var(--form-select-ms-value-background-color);

        @media (prefers-color-scheme: dark) {
            color: var(--form-select-ms-value-dark-color);
            background-color: var(--form-select-ms-value-dark-background-color);
        }
    }

    &[multiple],
    &[size]:not([size="1"]) {
        height: var(--form-select-multiple-height);
        padding-right: var(--form-select-multiple-padding-right);
        background-image: var(--form-select-multiple-background-image);
    }

    &:disabled:not([readonly]) {
        border-color: var(--form-select-disabled-border-color);
        color: var(--form-select-disabled-color);

        @media (prefers-color-scheme: dark) {
            color: var(--form-select-disabled-dark-color);
            background-color: var(--form-select-disabled-dark-background-color);
            border-color: var(--form-select-disabled-dark-border-color);
        }
    }

    &:-moz-focusring {
        color: var(--form-select-moz-focusring-color);
        text-shadow: var(--form-select-moz-focusring-text-shadow);
    }

    &.is-invalid,
    &[invalid] {
        border-color: var(--form-select-invalid-border-color);
        background-color: var(--form-select-invalid-background-color);
        color: var(--form-select-invalid-color);
        background-image: var(--form-select-invalid-background-image);
        background-repeat: var(--form-select-invalid-background-repeat);
        background-position: var(--form-select-invalid-background-position);
        background-size: var(--form-select-invalid-background-size);

        &:focus,
        &.focus {
            box-shadow: var(--form-select-invalid-focus-box-shadow);
        }
    }

    &.is-valid,
    &[valid] {
        border-color: var(--form-select-valid-border-color);
        background-color: var(--form-select-valid-background-color);
        color: var(--form-select-valid-color);
        background-image: var(--form-select-valid-background-image);
        background-repeat: var(--form-select-valid-background-repeat);
        background-position: var(--form-select-valid-background-position);
        background-size: var(--form-select-valid-background-size);

        &:focus,
        &.focus {
            box-shadow: var(--form-select-valid-focus-box-shadow);
        }
    }
}

@utility form-select-* {
    padding: --value(--form-select-padding-*);
    font-size: --value(--form-font-size-*);    
    border-radius: --value(--form-border-radius-*);    
    background-size: --value(--form-select-background-size-*);
}

@utility select-field {
    @apply form-select;
    font-size: var(--select-field-font-size);

    &.is-invalid,
    &[invalid] {
        label,
        .invalid-feedback {
            color: var(--form-select-invalid-color);
        }
    }

    &.is-valid,
    &[valid] {
        label,
        .valid-feedback {
            color: var(--form-select-valid-color);
        }
    }
}

@utility select-field-* {
    /* @apply form-select-*; */
    font-size: --value(--form-font-size-*);
}

/* Form group styles for select fields */
.select-field {
    .form-group-inner {
        position: var(--position-relative);
    }

    &:has(.form-group-inner-icon) .form-select {
        padding-left: var(--form-select-group-inner-icon-padding-left);
    }

    .form-group-inner-icon {
        position: var(--position-absolute);
        top: var(--position-top-50);
        left: var(--form-group-inner-icon-left);
        width: var(--form-group-inner-icon-size);
        font-size: var(--select-field-font-size);
        transform: var(--transform-translate-y-50);
        display: var(--display-flex);
        align-items: var(--align-items-center);
        justify-content: var(--justify-content-center);
    }
}

@utility form-select-plaintext {
    display: var(--form-select-plaintext-display);
    outline: var(--form-select-plaintext-outline);

/*     width: var(--form-select-width);
    color: var(--form-select-plaintext-color);
    border: var(--form-select-plaintext-border);
    
    background: var(--form-select-plaintext-background);
    cursor: var(--form-select-plaintext-cursor);
    padding: var(--form-select-padding-y) var(--form-select-padding-x);
    padding-left: var(--form-select-plaintext-padding-left);
    padding-right: var(--form-select-plaintext-padding-right);
    font-size: var(--form-select-plaintext-font-size);
    border-radius: var(--form-select-plaintext-border-radius); */

    @media (prefers-color-scheme: dark) {
        background-color: inherit;
    }

    &:focus {
        @media (prefers-color-scheme: dark) {
            color: var(--form-select-focus-dark-color);
            background-color: var(--form-select-focus-dark-background-color);            
        }
    }
}